<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <title>CTC vs å…ç–«ç´°èƒ å¤§æŒ‘æˆ°</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js"></script>

  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: 'Microsoft JhengHei', 'å¾®è»Ÿæ­£é»‘é«”', sans-serif; 
      background: #e0e8f0; 
      color: #333;
      line-height: 1.6;
    }
    #root {
      padding: 20px;
      max-width: 700px;
      margin: 20px auto;
      background-color: #ffffff;
      border-radius: 20px;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
    }
    .game-title {
        font-family: 'Microsoft JhengHei', 'å¾®è»Ÿæ­£é»‘é«”', sans-serif; 
        font-weight: bold; 
        text-align: center;
        font-size: 2.5em;
        color: #2c3e50;
        margin-bottom: 20px;
    }
    .card, .level-card, .result-card {
      border: none; 
      border-radius: 18px;
      padding: 25px;
      background: #fdfdfd;
      margin-bottom: 25px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
      transition: transform 0.2s ease-in-out;
    }
    .level-card:hover {
        transform: translateY(-5px);
    }
    h2 {
        font-family: 'Microsoft JhengHei', 'å¾®è»Ÿæ­£é»‘é«”', sans-serif; 
        font-weight: bold;
        color: #3498db;
    }
    button {
      display: block;
      width: 100%;
      margin: 12px 0;
      padding: 14px 26px;
      border-radius: 10px;
      border: none;
      background-image: linear-gradient(to right, #56ab2f 0%, #a8e063 51%, #56ab2f 100%);
      background-size: 200% auto;
      color: white;
      font-size: 18px;
      cursor: pointer;
      font-weight: 700; 
      font-family: 'Microsoft JhengHei', 'å¾®è»Ÿæ­£é»‘é«”', sans-serif; 
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
      transition: all 0.3s ease;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    button:hover {
      background-position: right center; 
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
      transform: translateY(-2px);
    }
    button:active {
        transform: translateY(1px);
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .action-button {
      font-size: 17px;
      background-image: linear-gradient(to right, #ff8008 0%, #ffc837 51%, #ff8008 100%);
    }
    .education-box {
      margin-top: 25px;
      padding: 18px;
      background: #e8f5e9; 
      border-radius: 12px;
      min-height: 50px;
      font-size: 16px;
      border-left: 5px solid #66bb6a; 
    }
    .detailed-education-box {
      margin-top: 15px;
      padding: 12px;
      background: #e1f5fe; 
      border-radius: 8px;
      font-size: 15px;
      border-left: 4px solid #03a9f4;
      text-align: left; 
      line-height: 1.7; 
    }
    .next-button, .detailed-edu-button {
      margin-top: 15px;
      padding: 10px 20px;
    }
    .detailed-edu-button {
      background-image: linear-gradient(to right, #6a11cb 0%, #2575fc 51%, #6a11cb 100%); 
      font-size: 16px;
    }
    .next-button {
      background-image: linear-gradient(to right, #00c6ff 0%, #0072ff 51%, #00c6ff 100%);
    }

    .scenario-text {
      overflow: hidden;
      white-space: pre-wrap; 
      animation: typing 2s steps(60, end);
      font-size: 20px;
      font-weight: 600;
      margin-bottom: 24px;
      color: #2c3e50;
    }
    @keyframes typing {
      from { width: 0 }
      to { width: 100% }
    }

    .narrator-icon {
      position: fixed;
      bottom: 20px;
      right: 20px;
      font-size: 40px; 
      cursor: pointer;
      background-color: #ffc107;
      border-radius: 50%;
      padding: 10px;
      box-shadow: 0 0 15px rgba(0,0,0,0.2);
      z-index: 1000;
      transition: transform 0.2s;
    }
    .narrator-icon:hover {
        transform: scale(1.1);
    }
    .narrator-popup {
      position: fixed;
      bottom: 90px;
      right: 20px;
      background-color: white;
      padding: 15px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.2);
      z-index: 1001;
      max-width: 250px;
      border: 2px solid #ffc107;
    }
    .narrator-popup::after { 
      content: '';
      position: absolute;
      bottom: -10px;
      right: 20px;
      width: 0;
      height: 0;
      border-left: 10px solid transparent;
      border-right: 10px solid transparent;
      border-top: 10px solid white; 
      filter: drop-shadow(0 1px 0.5px rgba(0,0,0,0.2));
    }
     .narrator-popup p {
        margin: 0;
        font-size: 15px;
        color: #555;
     }

    .progress-map {
      display: flex;
      justify-content: space-between;
      margin-bottom: 30px;
      padding: 10px 0;
      background-color: #f0f4f8;
      border-radius: 10px;
    }
    .progress-node {
      flex: 1;
      text-align: center;
      position: relative;
      font-size: 12px;
      color: #7f8c8d;
    }
    .progress-node .node-circle {
      width: 20px;
      height: 20px;
      background-color: #bdc3c7; 
      border-radius: 50%;
      margin: 0 auto 5px auto;
      transition: background-color 0.5s ease, transform 0.3s ease;
      border: 2px solid white;
    }
    .progress-node.active .node-circle {
      background-color: #2ecc71; 
      transform: scale(1.3);
      box-shadow: 0 0 10px #2ecc71;
    }
    .progress-node.completed .node-circle {
      background-color: #3498db; 
    }
    .progress-node:not(:last-child)::after { 
        content: '';
        position: absolute;
        top: 9px; 
        left: 50%;
        width: 100%;
        height: 4px;
        background-color: #bdc3c7;
        z-index: -1;
        transform: translateX(calc(-50% + 10px + 2px)); 
        transition: background-color 0.5s ease;
    }
    .progress-node.completed::after {
        background-color: #3498db;
    }

    .achievement-toast {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      background-color: #2ecc71;
      color: white;
      padding: 15px 25px;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.2);
      z-index: 2000;
      animation: fadeInOut 4s ease-in-out;
      font-size: 16px;
      display: flex;
      align-items: center;
    }
    .achievement-toast svg {
        margin-right: 10px;
    }
    @keyframes fadeInOut {
      0%, 100% { opacity: 0; top: 0px; }
      10%, 90% { opacity: 1; top: 20px; }
    }
    .badges-collected {
        margin-top: 20px;
    }
    .badge-icon {
        display: inline-block;
        margin: 5px;
        padding: 8px;
        background-color: #f0f0f0;
        border-radius: 6px;
        font-size: 14px;
        border: 1px solid #ddd;
    }
    .badge-icon svg { vertical-align: middle; margin-right: 5px; }

    .score-number {
      font-size: 2em;
      font-weight: bold;
      animation: scoreBump 0.5s ease-out;
    }
    @keyframes scoreBump {
      0% { transform: scale(0.5); opacity: 0; }
      70% { transform: scale(1.1); }
      100% { transform: scale(1); opacity: 1; }
    }
    .incorrect-score {
      color: #e74c3c; 
      animation: scoreBump 0.5s ease-out, flashRed 1s infinite alternate;
    }
    @keyframes flashRed {
      from { color: #e74c3c; }
      to { color: #c0392b; }
    }

    .confetti-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none; 
        overflow: hidden;
        z-index: 3000;
    }
    .confetti {
        position: absolute;
        width: 10px;
        height: 10px;
        background-color: #f00; 
        opacity: 0.7;
        animation: fall 3s linear infinite;
    }
    @keyframes fall {
        to {
            transform: translateY(100vh) rotate(360deg);
            opacity: 0;
        }
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect, useRef } = React;

    // --- Sound Synthesis with Tone.js ---
    let synth = null; 
    let initAudioPromise = null; 

    const ensureAudioInitialized = async () => {
        if (initAudioPromise) {
            await initAudioPromise; 
            if (synth && Tone.context.state === "running") return true;
        }

        initAudioPromise = (async () => {
            try {
                if (Tone.context.state !== "running") {
                    await Tone.start();
                }
                if (!synth) { 
                    synth = new Tone.Synth().toDestination();
                }
                return true;
            } catch (e) {
                console.error("Error in ensureAudioInitialized:", e);
                initAudioPromise = null; 
                return false;
            }
        })();
        return initAudioPromise;
    };
    

    const playSound = async (type) => {
      const ready = await ensureAudioInitialized();
      if (!ready || !synth || Tone.context.state !== "running") {
        return; 
      }

      try {
        const now = Tone.context.currentTime;
        const scheduleTimeOffset = 0.05; 

        if (type === 'correct') {
          synth.triggerAttackRelease("C5", "8n", now + scheduleTimeOffset); 
        } else if (type === 'incorrect') {
          synth.triggerAttackRelease("C3", "8n", now + scheduleTimeOffset); 
        } else if (type === 'achievement') { 
          const firstNoteTime = now + scheduleTimeOffset;
          synth.triggerAttackRelease("E5", "8n", firstNoteTime);
          synth.triggerAttackRelease("G5", "8n", firstNoteTime + 0.25); 
          synth.triggerAttackRelease("C6", "8n", firstNoteTime + 0.5);  
        } 
      } catch (error) {
          console.error("Tone.js error in playSound:", error.message, error.stack ? error.stack : '');
      }
    };
    
    // --- Game Data (Updated incorrect answer labels and education) ---
    const gameData = {
      intro: {
        prompt: "é¸æ“‡ä½ çš„è¶…ç´šç´°èƒè‹±é›„ï¼š",
        options: [
          { id: 'ctc', label: 'CTCç´°èƒï¼ˆå¾ªç’°è…«ç˜¤ç´°èƒï¼‰- æ½›è¡Œå¤§å¸«' },
          { id: 'immune', label: 'å…ç–«ç´°èƒï¼ˆè‡ªç„¶æ®ºæ‰‹NKç´°èƒï¼‰- æ­£ç¾©éµæ‹³' }
        ]
      },
      levels: {
        ctc: [
          { 
            id: 1,
            scenario: 'ä½ ï¼Œä¸€å€‹CTCç´°èƒï¼Œå‰›å¾æ“æ“ çš„åŸä½è…«ç˜¤ã€Œè¶Šç„ã€æˆåŠŸï¼Œè·³ä¸Šè¡€æµé«˜é€Ÿå…¬è·¯ï¼ç¬¬ä¸€ç«™ï¼Œå¦‚ä½•è¯éº—ç™»å ´ï¼Ÿ',
            actions: [
              { label: 'ä½èª¿è®Šè£ï¼æ›ä¸Šã€Œè·¯äººç”²ã€å¤–è¡£ï¼Œèå…¥èƒŒæ™¯ã€‚', correct: true, education: 'é«˜æ‹›ï¼CTCæœ€æ‡‚ã€Œè®Šè‰²é¾å½è£è¡“ã€ï¼Œé™ä½EpCAMè¡¨ç¾ï¼Œè®“å…ç–«è­¦å¯Ÿã€Œçœ‹èµ°çœ¼ã€ï¼', detailedEducation: 'æƒ³åƒä¸€ä¸‹ï¼ŒCTCç´°èƒå°±åƒå€‹è¶…ç´šé–“è«œï¼Œç‚ºäº†ä¸è¢«ç™¼ç¾ï¼Œå®ƒæœƒé€²è¡Œã€Œä¸Šçš®é–“è³ªè½‰åŒ–ã€(EMT)ã€‚é€™å°±åƒè„«æ‰åŸæœ¬é¡¯çœ¼çš„åˆ¶æœï¼ˆä¾‹å¦‚EpCAMé€™ç¨®ç´°èƒè¡¨é¢çš„ç‰¹æ®Šæ¨™è¨˜ï¼‰ï¼Œæ›ä¸Šä¸€èº«ä¸èµ·çœ¼çš„ä¾¿æœï¼Œè®“è‡ªå·±çœ‹èµ·ä¾†è·Ÿå‘¨åœç’°å¢ƒèç‚ºä¸€é«”ã€‚é€™æ¨£ä¸€ä¾†ï¼Œå…ç–«ç³»çµ±çš„è­¦å¯Ÿå°±å¾ˆé›£èªå‡ºå®ƒï¼Œå®ƒå°±èƒ½æ›´å®¹æ˜“æºœé€²è¡€æ¶²ä¸­ï¼Œé–‹å§‹å®ƒçš„ã€Œé•·å¾ã€åˆ°å…¶ä»–å™¨å®˜å»ºç«‹æ–°æ“šé»ã€‚é€™å€‹è®Šè£éç¨‹ä¸åªæ”¹è®Šå¤–è¡¨ï¼Œé‚„è®“å®ƒè®Šå¾—æ›´æœƒè·‘ã€æ›´è€æ‰“ï¼Œæ˜¯ç™Œç´°èƒè½‰ç§»çš„è¶…é‡è¦æŠ€èƒ½ï¼'},
              { label: 'å•Ÿå‹•ã€Œè¶…ç´šä¸Šçš®å‹æ…‹ã€ï¼Œå¼·åŒ–EpCAMè¡¨ç¾ï¼Œæ˜­å‘Šå¤©ä¸‹ï¼', correct: false, education: 'å“å‘€ï¼EpCAMå¤ªé¡¯çœ¼ï¼Œç­‰æ–¼åœ¨è·Ÿå…ç–«ç´°èƒèªªã€Œä¾†æŠ“æˆ‘å•Šï¼ã€ï¼Œå¾ˆå¿«å°±æœƒè¢«åŒ…åœäº†ã€‚æ½›è¡Œæ‰æ˜¯ç‹é“ï¼'}
            ]
          },
          { 
            id: 2,
            scenario: 'å‰æ–¹é«˜èƒ½ï¼ä¸€ç¾¤æ®ºæ°£é¨°é¨°çš„NKç´°èƒå·¡é‚éšŠå‡ºç¾ï¼Œä½ è©²æ€éº¼è¾¦ï¼Ÿ',
            actions: [
              { label: 'å…‰é€Ÿç‘å‡ºTGF-betaã€Œè¿·é­‚ç…™éœ§å½ˆã€ï¼', correct: true, education: 'æ¼‚äº®ï¼CTCçš„å¿ƒç†æˆ°è¡“å¥æ•ˆï¼ŒTGF-betaè®“å…‡çŒ›NKç´°èƒç¬é–“ã€Œæˆ°åŠ›æ­¸é›¶ã€ï¼Œç”Ÿå­˜æ©Ÿç‡UPï¼', detailedEducation: 'TGF-Î² (è½‰å‹ç”Ÿé•·å› å­-Î²) å°±åƒæ˜¯CTCç´°èƒé‡‹æ”¾çš„ä¸€ç¨®ã€Œå’Œå¹³å”è­°ã€ç…™éœ§å½ˆï¼Œä½†å…¶å¯¦æ˜¯å€‹é™°è¬€ï¼å®ƒæœƒè®“åŸæœ¬å……æ»¿æ®ºæ°£çš„NKç´°èƒï¼ˆè‡ªç„¶æ®ºæ‰‹ç´°èƒï¼‰å’ŒTç´°èƒé€™äº›å…ç–«æˆ°å£«å€‘ã€Œæ­¦åŠŸå…¨å»¢ã€ï¼Œè®Šå¾—è»Ÿå¼±ç„¡åŠ›ã€‚åœ¨è…«ç˜¤å‘¨åœï¼Œé€™ç¨®ç…™éœ§å½ˆç‰¹åˆ¥æ¿ƒï¼Œèƒ½æœ‰æ•ˆåœ°å£“åˆ¶å…ç–«ç³»çµ±çš„ç«åŠ›ï¼Œå¹«åŠ©å£å£çš„è…«ç˜¤ç´°èƒé€ƒéè¿½æ•ï¼Œç¹¼çºŒä½œæƒ¡ã€‚å¯ä»¥èªªï¼ŒTGF-Î²æ˜¯è…«ç˜¤ç´°èƒç”¨ä¾†ã€Œæ”¶è²·ã€æˆ–ã€Œè¿·æƒ‘ã€å…ç–«ç³»çµ±çš„é‡è¦æ­¦å™¨ä¹‹ä¸€ã€‚'},
              { label: 'é‡‹æ”¾å¤§é‡IL-2ï¼ˆä»‹ç™½ç´ -2ï¼‰ï¼Œè©¦åœ–èˆ‡NKç´°èƒã€Œæºé€šã€ï¼', correct: false, education: 'ç³Ÿç³•ï¼IL-2åè€Œæœƒæ´»åŒ–NKç´°èƒå’ŒTç´°èƒï¼Œè®“å®ƒå€‘æ®ºæ°£æ›´æ—ºï¼é€™ä¸‹å¯çœŸæ˜¯ã€Œç«ä¸ŠåŠ æ²¹ã€äº†ã€‚'}
            ]
          },
           { 
            id: 3,
            scenario: 'è‚ºéƒ¨å¾®è¡€ç®¡æ ¹æœ¬æ˜¯ã€Œç´°èƒç‰ˆå°–å³°æ™‚åˆ»ã€ï¼çª„åˆ°çˆ†ï¼Œä½ å¡ä½äº†ï¼Œæ€éº¼è¾¦ï¼Ÿ',
            actions: [
              { label: 'æ–½å±•ã€Œç¸®éª¨åŠŸã€ï¼ŒæŠŠè‡ªå·±å£“æ‰æ“ éå»ï¼', correct: true, education: 'CTCçš„æŸ”è»Ÿåº¦å ªæ¯”ç‘œçˆå¤§å¸«ï¼æˆåŠŸè®Šå½¢é€šéï¼Œä¸ç„¶å¡ä½å°±æ˜¯å…ç–«ç³»çµ±çš„ã€Œè‡ªåŠ©é¤ã€ã€‚', detailedEducation: 'CTCç´°èƒç‚ºäº†åœ¨ç´°å°çš„è¡€ç®¡è£¡ç©¿æ¢­ï¼Œç·´å°±äº†ä¸€èº«ã€Œè»Ÿéª¨åŠŸã€ï¼Œä¹Ÿå°±æ˜¯ç´°èƒå¯å¡‘æ€§ã€‚å®ƒå€‘ä¸åƒç¡¬æ¢†æ¢†çš„ç©æœ¨ï¼Œè€Œæ˜¯åƒé»åœŸä¸€æ¨£å¯ä»¥æ”¹è®Šå½¢ç‹€ã€‚é€™èƒŒå¾Œçš„ç§˜å¯†åœ¨æ–¼ç´°èƒå…§éƒ¨çš„ã€Œéª¨æ¶ã€ï¼ˆç´°èƒéª¨æ¶ï¼‰å¯ä»¥å¿«é€Ÿåœ°æ‹†è§£å’Œé‡çµ„ã€‚ç•¶é‡åˆ°ç‹¹çª„é€šé“æ™‚ï¼Œå®ƒå€‘å°±èƒ½æŠŠè‡ªå·±ã€Œæ“ ã€éå»ï¼Œé€™ç¨®è¶…å¼·çš„è®Šå½¢èƒ½åŠ›æ˜¯å®ƒå€‘æˆåŠŸè½‰ç§»åˆ°èº«é«”å…¶ä»–éƒ¨ä½çš„é—œéµçµ•æ´»ä¹‹ä¸€ï¼Œä¸ç„¶å¡åœ¨è¡€ç®¡è£¡å¾ˆå¿«å°±æœƒè¢«å…ç–«ç´°èƒæŠ“èµ°äº†ï¼'},
              { label: 'å¼·åŒ–ç´°èƒè†œç¡¬åº¦ï¼Œè©¦åœ–ã€Œæ’é–‹ã€è¡€ç®¡ï¼', correct: false, education: 'æ¯æ¹¯å•Šï¼å¾®è¡€ç®¡å¯ä¸æ˜¯æ©¡çš®ç­‹ï¼Œç¡¬æ’çš„çµæœåªæœƒè®“è‡ªå·±å¡å¾—æ›´æ­»ï¼Œè®Šæˆå…ç–«ç´°èƒçš„å›Šä¸­ç‰©ã€‚'}
            ]
          },
          { 
            id: 4,
            scenario: 'çµ‚æ–¼çœ‹åˆ°é ç«¯å™¨å®˜çš„ã€Œç™»é™¸é»ã€ï¼Œæœ€æ½®çš„é™è½æ–¹å¼æ˜¯ï¼Ÿ',
            actions: [
              { label: 'å•Ÿå‹•ã€Œæ•´åˆç´ ã€è¶…å¼·å¸ç›¤ï¼Œç²¾æº–ç©ºé™ï¼', correct: true, education: 'ã€Œæ•´åˆç´ ã€ä¸€å‡ºï¼Œèª°èˆ‡çˆ­é‹’ï¼åƒå…«çˆªç« é­šä¸€æ¨£ç·Šç·Šå¸é™„å…§çš®ç´°èƒï¼Œè½‰ç§»å¤§æ¥­GETï¼', detailedEducation: 'æ•´åˆç´ ï¼ˆIntegrinsï¼‰å°±åƒæ˜¯CTCç´°èƒè¡¨é¢è£å‚™çš„è¶…å¼·åŠ›ã€Œå¸ç›¤ã€æˆ–ã€Œé­”é¬¼æ°ˆã€ã€‚ç•¶CTCç´°èƒæ¼‚æµåˆ°é©åˆã€Œå®šå±…ã€çš„æ–°å™¨å®˜æ™‚ï¼Œé€™äº›æ•´åˆç´ å°±æœƒå’Œè¡€ç®¡å…§å£ç´°èƒï¼ˆå…§çš®ç´°èƒï¼‰æˆ–å‘¨åœçš„çµ„ç¹”çµæ§‹ä¸Šçš„ç‰¹å®šåˆ†å­ã€Œç·Šç·Šæ¡æ‰‹ã€ã€‚é€™ä¸€æ¡æ‰‹å¯ä¸å¾—äº†ï¼Œèƒ½è®“CTCç´°èƒç‰¢ç‰¢åœ°é»é™„åœ¨æ–°çš„åœ°æ–¹ï¼Œä¸å†éš¨æ³¢é€æµï¼Œç‚ºæ¥ä¸‹ä¾†çš„ã€Œæ®–æ°‘ã€è¡Œå‹•æ‰“ä¸‹å …å¯¦çš„åŸºç¤ã€‚å¯ä»¥èªªï¼Œæ²’æœ‰æ•´åˆç´ çš„å¹«å¿™ï¼ŒCTCæƒ³æˆåŠŸè½‰ç§»ç°¡ç›´æ˜¯å¤©æ–¹å¤œè­šï¼'},
              { label: 'é—œé–‰æ‰€æœ‰è¡¨é¢é»é™„åˆ†å­ï¼ŒæœŸå¾…ã€Œé‡å­ç©¿éš§ã€æ•ˆæ‡‰ã€‚', correct: false, education: 'åŒå­¸ï¼Œç‰©ç†å­¸ä¸æ˜¯é€™æ¨£ç”¨çš„å•¦ï¼æ²’æœ‰é»é™„åˆ†å­ï¼Œä½ åªæœƒåœ¨è¡€æ¶²è£¡æ¼‚åˆ°å¤©è’åœ°è€ï¼Œæ‰¾ä¸åˆ°æ–°å®¶ã€‚'}
            ]
          },
          { 
            id: 5,
            scenario: 'æˆåŠŸåœ¨æ–°å®¶å»ºç«‹å¾®å‹åŸºåœ°ï¼ä½†å‘¨åœè™è¦–çœˆçœˆï¼Œå¦‚ä½•éå›ºåœ°ç›¤ï¼Ÿ',
            actions: [
              { label: 'æ–½å±•ã€Œå…ç–«æŠ‘åˆ¶çµç•Œã€ï¼Œè®“æ•µäººä¸æ•¢é è¿‘ï¼', correct: true, education: 'é«˜æ‹›ï¼å»ºç«‹è‡ªå·±çš„ã€Œå®‰å…¨å€ã€ï¼Œå…ç–«ç´°èƒç¹é“èµ°ï¼Œæ‰èƒ½å®‰å¿ƒç™¼å±•ï¼Œæˆç‚ºä¸€æ–¹éœ¸ä¸»ï¼', detailedEducation: 'è…«ç˜¤ç´°èƒéå¸¸ç‹¡çŒ¾ï¼Œå®ƒå€‘åœ¨æ–°å®¶å»ºç«‹æ“šé»å¾Œï¼Œæœƒæƒ³è¾¦æ³•è®“è‡ªå·±ã€Œéš±å½¢ã€æˆ–ã€Œåˆ€æ§ä¸å…¥ã€ã€‚å…¶ä¸­ä¸€æ‹›å°±æ˜¯é‡‹æ”¾å„ç¨®åŒ–å­¸ä¿¡è™Ÿï¼Œæ¯”å¦‚PD-L1é€™ç¨®ã€Œåˆ¥ä¾†ç…©æˆ‘ã€çš„ç‰Œå­ï¼Œæˆ–è€…TGF-Î²é€™ç¨®ã€Œå‚¬çœ ç“¦æ–¯ã€ï¼Œè®“å…ç–«ç´°èƒï¼ˆåƒæ˜¯Tç´°èƒã€NKç´°èƒï¼‰çš„æˆ°é¬¥åŠ›ä¸‹é™ï¼Œç”šè‡³ç›´æ¥ã€Œå›è®Šã€è®Šæˆå¹«å…‡ï¼ˆåƒæ˜¯æŸäº›å·¨å™¬ç´°èƒï¼‰ã€‚é€™æ¨£ä¸€ä¾†ï¼Œè…«ç˜¤å‘¨åœå°±å½¢æˆäº†ä¸€å€‹ã€Œå…ç–«æŠ‘åˆ¶å¾®ç’°å¢ƒã€ï¼Œåƒå€‹ä¿è­·ç½©ä¸€æ¨£ï¼Œè®“è…«ç˜¤ç´°èƒå¯ä»¥å®‰å¿ƒé•·å¤§ï¼Œä¸æ€•è¢«å…ç–«ç³»çµ±æ¶ˆæ»…ã€‚'},
              { label: 'é‡‹æ”¾å¤§é‡ã€Œç´°èƒæ¿€ç´ é¢¨æš´ã€ï¼Œä¼åœ–åš‡è·‘å…ç–«ç´°èƒã€‚', correct: false, education: 'å“å‘€ï¼ç´°èƒæ¿€ç´ é¢¨æš´é€šå¸¸æ˜¯å…ç–«ç³»çµ±éåº¦åæ‡‰çš„çµæœï¼Œåè€Œå¯èƒ½å¼•ä¾†æ›´å¤šå…ç–«ç´°èƒï¼ŒæŠŠè‡ªå·±æå¾—æ›´æ…˜ï¼'}
            ]
          },
          { 
            id: 6,
            scenario: 'æ–°å®¶å‘¨åœçš„ã€Œç´°èƒå¤–åŸºè³ªã€åƒæ°´æ³¥ç‰†ä¸€æ¨£åšï¼Œæ€éº¼è¾¦ï¼Ÿ',
            actions: [
              { label: 'åˆ†æ³ŒMMPsï¼ˆåŸºè³ªé‡‘å±¬è›‹ç™½é…¶ï¼‰ã€Œè¶…ç´šé›»é‘½ã€é–‹è·¯ï¼', correct: true, education: 'MMPså‡ºæ‰‹ï¼ŒéŠ…ç‰†éµå£ä¹Ÿè®Šè±†è…æ¸£ï¼é †åˆ©æ»²é€ï¼Œæ“´å¼µé ˜åœŸï¼', detailedEducation: 'ç´°èƒå¤–åŸºè³ªï¼ˆECMï¼‰å°±åƒç´°èƒå±…ä½ç’°å¢ƒä¸­çš„ã€Œé‹¼ç­‹æ°´æ³¥ã€ï¼Œæä¾›æ”¯æ’å’Œçµæ§‹ã€‚ä½†å°æƒ³è¦æ“´å¼µåœ°ç›¤çš„CTCç´°èƒä¾†èªªï¼Œé€™å±¤ã€Œæ°´æ³¥ç‰†ã€å¤ªç¤™äº‹äº†ï¼æ–¼æ˜¯å®ƒå€‘æœƒåˆ†æ³Œä¸€ç¨®å«åšã€ŒåŸºè³ªé‡‘å±¬è›‹ç™½é…¶ã€(MMPs) çš„ç‰¹æ®Šé…µç´ ã€‚MMPså°±åƒä¸€æŠŠã€Œç”Ÿç‰©é›»é‘½ã€ï¼Œèƒ½å¤ åˆ†è§£é€™äº›ECMçµæ§‹ï¼Œå¹«CTCç´°èƒã€Œé‘½ã€å‡ºä¸€æ¢è·¯ä¾†ï¼Œæ–¹ä¾¿å®ƒå€‘ä¾µå…¥å‘¨åœçµ„ç¹”ï¼Œé€²ä¸€æ­¥æ“´å¤§å‹¢åŠ›ç¯„åœã€‚å¯ä»¥èªªï¼ŒMMPsæ˜¯CTCç´°èƒæã€Œéæ³•æ“´å»ºã€çš„é‡è¦å·¥å…·ï¼'},
              { label: 'åˆ†æ³Œã€Œè† åŸè›‹ç™½åˆæˆé…¶ã€ï¼Œè©¦åœ–è»ŸåŒ–åŸºè³ªã€‚', correct: false, education: 'æ–¹å‘åäº†å•¦ï¼è† åŸè›‹ç™½åˆæˆé…¶æ˜¯ã€Œè“‹ç‰†ã€çš„ï¼Œä¸æ˜¯ã€Œæ‹†ç‰†ã€çš„ï¼Œåªæœƒè®“è‡ªå·±æ›´é›£å‡ºå»ï¼'}
            ]
          },
          { 
            id: 7,
            scenario: 'åŸºåœ°æ“´å¼µå¤ªå¿«ï¼Œç³§é£Ÿå’Œæ°§æ°£ä¾›æ‡‰ä¸è¶³ï¼Œå‡ºç¾ã€Œé£¢è’ã€å±æ©Ÿï¼',
            actions: [
              { label: 'é‡‹æ”¾VEGFè¨Šè™Ÿï¼Œæ‹›å‹Ÿã€Œè¡€ç®¡å·¥ç¨‹éšŠã€é‹ªè¨­æ–°ç®¡ç·šï¼', correct: true, education: 'VEGFä¸€å‡ºï¼Œè¡€ç®¡æ–°ç”Ÿï¼ç³§è‰å……è¶³ï¼Œæ‰èƒ½ç¹¼çºŒä½ çš„åƒç§‹éœ¸æ¥­ï¼', detailedEducation: 'ç•¶è…«ç˜¤é•·å¾—å¤ªå¿«å¤ªå¤§ï¼Œè£¡é¢çš„ç´°èƒå°±æœƒé–‹å§‹ã€Œå–Šé¤“ã€ï¼Œå› ç‚ºåŸæœ‰çš„è¡€ç®¡é€ä¾†çš„é¤Šåˆ†å’Œæ°§æ°£ä¸å¤ ç”¨äº†ã€‚é€™æ™‚å€™ï¼Œè…«ç˜¤ç´°èƒæœƒé‡‹æ”¾ä¸€ç¨®å«åšã€Œè¡€ç®¡å…§çš®ç”Ÿé•·å› å­ã€(VEGF) çš„æ±‚æ•‘ä¿¡è™Ÿã€‚é€™å€‹ä¿¡è™Ÿå°±åƒæ˜¯åœ¨æ‹›å‹Ÿã€Œè¡€ç®¡å·¥ç¨‹éšŠã€ï¼Œåˆºæ¿€å‘¨åœçš„è¡€ç®¡é•·å‡ºæ–°çš„åˆ†æ”¯ï¼Œå»¶ä¼¸åˆ°è…«ç˜¤å…§éƒ¨ã€‚é€™äº›æ–°ç”Ÿçš„è¡€ç®¡å°±åƒæ˜¯ç‚ºè…«ç˜¤é‹ªè¨­çš„ã€Œç§˜å¯†è£œçµ¦ç·šã€ï¼Œæºæºä¸æ–·åœ°é€ä¾†é¤Šåˆ†ï¼Œå¹«åŠ©è…«ç˜¤ç¹¼çºŒé•·å¤§ã€‚é€™å€‹éç¨‹å°±å«åšã€Œè¡€ç®¡æ–°ç”Ÿã€ï¼Œæ˜¯è…«ç˜¤èƒ½æŒçºŒæ“´å¼µçš„é—œéµã€‚'},
              { label: 'å•Ÿå‹•ã€Œç³–è§£ä½œç”¨MAXæ¨¡å¼ã€ï¼ŒæœŸæœ›ç„¡æ°§ä¹Ÿèƒ½ç”¢ç”Ÿèƒ½é‡ã€‚', correct: false, education: 'é›–ç„¶ç™Œç´°èƒæ“…é•·ç³–è§£ä½œç”¨ï¼Œä½†å…‰é é€™å€‹æ’ä¸äº†å¤šä¹…ï¼Œé‚„æ˜¯éœ€è¦æ°§æ°£å’Œå®Œæ•´ç‡Ÿé¤Šçš„ï¼åˆ¥è·Ÿè‡ªå·±çš„è‚šå­éä¸å»å•Šï¼'}
            ]
          },
          { 
            id: 8,
            scenario: 'å…ç–«ç³»çµ±æ´¾å‡ºäº†ã€ŒPD-1æª¢æŸ¥é»ç‰¹å‹™ã€ï¼Œè©¦åœ–è§£é™¤ä½ çš„æ­¦è£ï¼',
            actions: [
              { label: 'äº®å‡ºä½ çš„ã€ŒPD-L1å½é€ é€šè¡Œè­‰ã€ï¼Œè®“ç‰¹å‹™æ”¾è¡Œï¼', correct: true, education: 'PD-L1å°±æ˜¯ä½ çš„ã€Œå…æ­»é‡‘ç‰Œã€ï¼æˆåŠŸçŸ‡é¨™æª¢æŸ¥é»ï¼Œå…ç–«æ”»æ“Šæš«æ™‚è§£é™¤ï¼', detailedEducation: 'PD-1æ˜¯å…ç–«ç´°èƒï¼ˆå°¤å…¶æ˜¯Tç´°èƒï¼‰è¡¨é¢çš„ä¸€å€‹ã€Œç…è»Šã€æŒ‰éˆ•ã€‚è€ŒPD-L1å‰‡æ˜¯æŸäº›ç´°èƒï¼ˆåŒ…æ‹¬ä¸€äº›ç‹¡çŒ¾çš„ç™Œç´°èƒï¼‰è¡¨é¢çš„ä¸€å€‹ã€Œé€šè¡Œè­‰ã€ã€‚ç•¶ç™Œç´°èƒè¡¨é¢çš„PD-L1å’ŒTç´°èƒçš„PD-1ã€Œæ¡æ‰‹ã€æ™‚ï¼Œå°±æœƒè¸©ä¸‹Tç´°èƒçš„ç…è»Šï¼Œè®“Tç´°èƒç„¡æ³•ç™¼å‹•æ”»æ“Šã€‚é€™å°±åƒç™Œç´°èƒå‡ºç¤ºäº†ä¸€å€‹ã€Œæˆ‘æ˜¯å¥½äººã€çš„å‡è­‰ä»¶ï¼Œé¨™éäº†å…ç–«è­¦å¯Ÿã€‚æ‰€ä»¥ï¼ŒPD-L1æ˜¯ç™Œç´°èƒé€ƒé¿å…ç–«ç³»çµ±è¿½æ®ºçš„ä¸€å€‹é‡è¦ä¼å€†ï¼Œä¹Ÿæ˜¯ç›®å‰ç™Œç—‡å…ç–«æ²»ç™‚çš„ç†±é–€é¶é»ä¹‹ä¸€ã€‚'},
              { label: 'è¡¨ç¾å¤§é‡CTLA-4ï¼Œå¸Œæœ›èƒ½ã€Œè¿·æƒ‘ã€PD-1ç‰¹å‹™ã€‚', correct: false, education: 'å¼µé£›æ‰“å²³é£›ï¼ŸCTLA-4æ˜¯å¦ä¸€å€‹å…ç–«æª¢æŸ¥é»åˆ†å­ï¼Œè·ŸPD-1/PD-L1æ˜¯ä¸åŒç³»çµ±çš„å•¦ï¼é€™æ¨£æ˜¯ç„¡æ³•æˆåŠŸå½è£çš„ã€‚'}
            ]
          },
          { 
            id: 9,
            scenario: 'é¢¨è²é¶´å”³ï¼å…ç–«å¤§è»ä¼¼ä¹è¦ç¸½æ”»æ“Šäº†ï¼Œæƒ…æ³ä¸å¦™ï¼',
            actions: [
              { label: 'å•Ÿå‹•ã€Œé¾œæ¯å¤§æ³•ã€ï¼ˆä¼‘çœ æ¨¡å¼ï¼‰ï¼Œæš«é¿é¢¨é ­ï¼Œç­‰å¾…æ™‚æ©Ÿã€‚', correct: true, education: 'é«˜æ˜ï¼é€²å…¥ä¼‘çœ ç‹€æ…‹ï¼Œé™ä½ä»£è¬ï¼Œè®“å…ç–«ç´°èƒæ‰¾ä¸åˆ°ç›®æ¨™ã€‚ç•™å¾—é’å±±åœ¨ï¼Œä¸æ€•æ²’æŸ´ç‡’ï¼', detailedEducation: 'è…«ç˜¤ç´°èƒçš„ã€Œä¼‘çœ ã€(Dormancy) å°±åƒæ˜¯æ­¦ä¿ å°èªªè£¡çš„ã€Œé¾œæ¯å¤§æ³•ã€ã€‚ç•¶å¤§ç’°å¢ƒå°å®ƒä¸åˆ©æ™‚ï¼Œæ¯”å¦‚é‡åˆ°å¼·å¤§çš„å…ç–«æ”»æ“Šæˆ–åŒ–ç™‚è—¥ç‰©ï¼Œä¸€äº›è…«ç˜¤ç´°èƒæœƒé¸æ“‡æš«æ™‚ã€Œè£æ­»ã€ï¼Œé€²å…¥ä¼‘çœ ç‹€æ…‹ã€‚é€™æ™‚å€™å®ƒå€‘ä¸åˆ†è£‚ä¹Ÿä¸å¤ªæ´»å‹•ï¼Œæ–°é™³ä»£è¬ä¹Ÿé™åˆ°æœ€ä½ï¼Œå°±åƒç¡è‘—äº†ä¸€æ¨£ã€‚é€™æ¨£ä¸€ä¾†ï¼Œå…ç–«ç´°èƒå¾ˆé›£ç™¼ç¾å®ƒå€‘ï¼Œè—¥ç‰©ä¹Ÿå°å®ƒå€‘æ²’è½ã€‚ç­‰åˆ°é¢¨é ­éå»ï¼Œç’°å¢ƒè®Šå¥½ï¼Œé€™äº›ã€Œç¡ç¾äººã€ç´°èƒå°±å¯èƒ½å†æ¬¡é†’ä¾†ï¼Œå°è‡´ç™Œç—‡å¾©ç™¼ã€‚æ‰€ä»¥ï¼Œè…«ç˜¤ä¼‘çœ æ˜¯ç™Œç—‡æ²»ç™‚ä¸­ä¸€å€‹éå¸¸æ£˜æ‰‹çš„å•é¡Œã€‚'},
              { label: 'å•Ÿå‹•ã€Œç´°èƒå‡‹äº¡æŠµæŠ—åŸºå› ã€ï¼Œæº–å‚™ç¡¬æ‰›åˆ°åº•ã€‚', correct: false, education: 'é›–ç„¶æŠµæŠ—å‡‹äº¡å¾ˆé‡è¦ï¼Œä½†é¢å°å…ç–«å¤§è»çš„åœå‰¿ï¼Œå…‰é é€™å€‹åŸºå› ç¡¬æ‰›æ˜¯å¾ˆé›£å­˜æ´»çš„ï¼Œé‚„æ˜¯å…ˆé¿é¿é¢¨é ­å§ï¼'}
            ]
          },
          { 
            id: 10,
            scenario: 'ç¶“éä¹æ­»ä¸€ç”Ÿï¼Œä½ çµ‚æ–¼åœ¨æ–°å™¨å®˜ç«™ç©©è…³è·Ÿï¼Œæˆç‚ºé›£ä»¥æ ¹é™¤çš„ã€Œè½‰ç§»ç¶ã€ï¼',
            actions: [
              { label: 'ä¸æ–·é€²åŒ–ï¼Œç™¼å±•å‡ºã€ŒæŠ—è—¥æ€§ã€ï¼Œæˆç‚ºè—¥ç‰©ä¹Ÿé›£ä»¥æ’¼å‹•çš„å­˜åœ¨ï¼', correct: true, education: 'æ­å–œï¼ä½ å·²æ˜¯é ‚ç´šCTCï¼ç™¼å±•å‡ºå¤šé‡æŠ—è—¥æ€§ï¼Œè®“åŒ–ç™‚è—¥ç‰©ä¹Ÿå°ä½ æŸæ‰‹ç„¡ç­–ï¼ŒçœŸæ­£å¯¦ç¾äº†ã€Œè½åœ°ç”Ÿæ ¹ã€ï¼', detailedEducation: 'è…«ç˜¤ç´°èƒéå¸¸ã€Œè°æ˜ã€ï¼Œåœ¨è—¥ç‰©æ²»ç™‚çš„å£“åŠ›ä¸‹ï¼Œå®ƒå€‘æœƒæƒ³ç›¡è¾¦æ³•ã€Œé€²åŒ–ã€å‡ºæŠ—è—¥æ€§ã€‚é€™å°±åƒç©éŠæˆ²æ‰“é­”ç‹ï¼Œç¬¬ä¸€æ¬¡ç”¨æŸæ‹›æœ‰æ•ˆï¼Œä½†é­”ç‹ä¸‹æ¬¡å¯èƒ½å°±å…ç–«äº†ã€‚ç™Œç´°èƒå¯èƒ½é€éå¤šç¨®æ–¹å¼ç”¢ç”ŸæŠ—è—¥æ€§ï¼šæ¯”å¦‚æŠŠè—¥ç‰©åƒåƒåœ¾ä¸€æ¨£ã€Œæ³µã€å‡ºç´°èƒå¤–ï¼›æˆ–è€…æ”¹è®Šè—¥ç‰©ä½œç”¨çš„ã€Œé¶é»ã€ï¼Œè®“è—¥ç‰©æ‰“ä¸ä¸­ï¼›ç”šè‡³æ´»åŒ–å…¶ä»–çš„ã€Œå‚™ç”¨é€šé“ã€ä¾†ç¹éè—¥ç‰©çš„å°é–ã€‚é€™ç¨®æŠ—è—¥æ€§æ˜¯ç™Œç—‡æ²»ç™‚å¤±æ•—å’Œå¾©ç™¼çš„ä¸»è¦åŸå› ä¹‹ä¸€ï¼Œä¹Ÿæ˜¯ç§‘å­¸å®¶å€‘æŒçºŒåŠªåŠ›å…‹æœçš„é›£é¡Œã€‚'},
              { label: 'åˆ†æ³Œå¤§é‡ã€Œç”Ÿé•·æ¿€ç´ ã€ï¼Œè©¦åœ–å¿«é€Ÿä½”é ˜æ•´å€‹å™¨å®˜ã€‚', correct: false, education: 'ç”Ÿé•·æ¿€ç´ é›–ç„¶èƒ½ä¿ƒé€²ç”Ÿé•·ï¼Œä½†èƒ¡äº‚åˆ†æ³Œå¯èƒ½æœƒå¼•ç™¼å…¶ä»–å•é¡Œï¼Œè€Œä¸”å…ç–«ç³»çµ±ä¹Ÿä¸æ˜¯åƒç´ çš„ï¼ç©©ç´®ç©©æ‰“æ¯”è¼ƒé‡è¦ã€‚'}
            ]
          }
        ],
        immune: [
          { 
            id: 1,
            scenario: 'ä½ æ˜¯æ­£ç¾©çš„NKç´°èƒå·¡é‚å“¡ï¼Œç™¼ç¾ä¸€å€‹ç´°èƒé¬¼é¬¼ç¥Ÿç¥Ÿï¼ŒEpCAMå€¼çˆ†è¡¨ï¼Œæ€éº¼è¾¦ï¼Ÿ',
            actions: [
              { label: 'å•Ÿå‹•ã€Œæ ¼æ®ºå‹¿è«–ã€æ¨¡å¼ï¼Œä¸€æ‹³KOï¼', correct: true, education: 'å°±æ˜¯ä½ ï¼EpCAMç•°å¸¸çš„å‚¢ä¼™ä¼‘æƒ³é€ƒï¼æ­£ç¾©åŸ·è¡Œï¼Œç´°èƒç•Œçš„ç§©åºç”±æˆ‘å®ˆè­·ï¼', detailedEducation: 'NKç´°èƒï¼ˆè‡ªç„¶æ®ºæ‰‹ç´°èƒï¼‰å°±åƒæ˜¯å…ç–«ç³»çµ±è£¡çš„ã€Œç‰¹ç¨®éƒ¨éšŠã€ï¼Œä¸éœ€è¦äº‹å…ˆã€Œæ¼”ç¿’ã€å°±èƒ½ç›´æ¥è¾¨è­˜ä¸¦å¹¹æ‰ç•°å¸¸ç´°èƒï¼Œä¾‹å¦‚ç™Œç´°èƒæˆ–è¢«ç—…æ¯’æ„ŸæŸ“çš„ç´°èƒã€‚å®ƒå€‘åˆ¤æ–·æ•µäººçš„æ–¹å¼ä¹‹ä¸€æ˜¯çœ‹ç´°èƒè¡¨é¢æœ‰æ²’æœ‰æ›å‡ºã€Œæˆ‘æ˜¯å£è›‹ã€çš„ç‰¹æ®Šæ¨™è¨˜ï¼Œæˆ–è€…æ˜¯ä¸æ˜¯å°‘äº†ã€Œæˆ‘æ˜¯è‡ªå·±äººã€çš„æ­£å¸¸æ¨™è¨˜ã€‚EpCAMæ˜¯ä¸€ç¨®å¸¸åœ¨ç™Œç´°èƒè¡¨é¢éåº¦è¡¨ç¾çš„è›‹ç™½è³ªï¼Œå°NKç´°èƒä¾†èªªï¼Œé€™å¯èƒ½å°±æ˜¯ä¸€å€‹å¯ç–‘çš„ã€Œç´…è‰²è­¦å ±ã€ï¼Œæç¤ºé€™å€‹ç´°èƒä¸å°å‹ï¼Œéœ€è¦å„ªå…ˆè™•ç†ï¼'},
              { label: 'é‡‹æ”¾ã€Œè£œé«”C3bã€ï¼Œæ¨™è¨˜å®ƒä»¥ä¾¿å¾ŒçºŒè™•ç†ã€‚', correct: false, education: 'è£œé«”ç³»çµ±é›–ç„¶é‡è¦ï¼Œä½†NKç´°èƒæ›´å‚¾å‘ç›´æ¥å‹•æ‰‹ï¼æ¨™è¨˜æ˜¯å·¨å™¬ç´°èƒæ¯”è¼ƒæ„›åšçš„äº‹ã€‚'}
            ]
          },
          { 
            id: 2,
            scenario: 'å¯æƒ¡ï¼é‚£å€‹CTCå±…ç„¶æŠŠMHC-Iåˆ†å­è—èµ·ä¾†ï¼Œæƒ³ç©ã€Œèº²è²“è²“ã€ï¼Ÿ',
            actions: [
              { label: 'å“¼ï¼é€ƒä¸éæˆ‘çš„æ³•çœ¼ï¼å•Ÿå‹•ã€Œå¤±è¹¤MHCæœç´¢ã€æ¨¡å¼ï¼', correct: true, education: 'å¹¹å¾—å¥½ï¼MHC-Iç¼ºå¤±å°±æ˜¯ã€Œæ­¤åœ°ç„¡éŠ€ä¸‰ç™¾å…©ã€ï¼Œç›´æ¥åˆ¤å®šæœ‰ç½ªï¼Œæ®ºç„¡èµ¦ï¼', detailedEducation: 'MHC-I åˆ†å­å°±åƒæ˜¯ç´°èƒçš„ã€Œèº«åˆ†è­‰ã€ï¼ŒæœƒæŠŠç´°èƒå…§éƒ¨è£½é€ çš„è›‹ç™½è³ªç‰‡æ®µå±•ç¤ºåœ¨ç´°èƒè¡¨é¢ï¼Œè®“å…ç–«ç´°èƒï¼ˆç‰¹åˆ¥æ˜¯Tç´°èƒï¼‰æª¢æŸ¥ã€Œè£¡é¢æœ‰æ²’æœ‰å•é¡Œã€ã€‚æ­£å¸¸çš„ç´°èƒæœƒå±•ç¤ºæ­£å¸¸çš„ç‰‡æ®µã€‚ä½†å¾ˆå¤šç™Œç´°èƒæˆ–ç—…æ¯’æ„ŸæŸ“çš„ç´°èƒç‚ºäº†èº²é¿Tç´°èƒçš„è¿½æ®ºï¼Œæœƒæ•…æ„æŠŠMHC-Iè—èµ·ä¾†ï¼Œä¸è®“Tç´°èƒçœ‹åˆ°ã€‚ä¸éï¼ŒNKç´°èƒæœ‰å¦ä¸€å¥—ã€Œmissing-selfã€ï¼ˆè‡ªæˆ‘ç¼ºå¤±ï¼‰çš„è­˜åˆ¥æ©Ÿåˆ¶ï¼Œä¸€æ—¦ç™¼ç¾æœ‰ç´°èƒã€Œèº«åˆ†è­‰ä¸è¦‹äº†ã€ï¼Œåè€Œæœƒè§¸ç™¼å®ƒå€‘çš„æ®ºæ‰‹æœ¬èƒ½ï¼Œèªç‚ºé€™å€‹ç´°èƒæœ‰é¬¼ï¼Œæ ¼æ®ºå‹¿è«–ï¼'},
              { label: 'åˆ†æ³Œå¤§é‡ã€Œè¶¨åŒ–å› å­ã€ï¼ŒæŠŠå®ƒå¼•èª˜åˆ°é™·é˜±å€ã€‚', correct: false, education: 'é›–ç„¶è¶¨åŒ–å› å­å¯ä»¥å¼•å°ç´°èƒç§»å‹•ï¼Œä½†NKç´°èƒæ›´å–œæ­¡ä¸»å‹•å‡ºæ“Šï¼Œä¸æ˜¯è¨­é™·é˜±çš„é¡å‹å•¦ï¼'}
            ]
          },
          { 
            id: 3,
            scenario: 'CTCæ‰¾ä¾†è¡€å°æ¿ç•¶ã€Œä¿é‘£ã€ï¼Œæƒ³ç©¿ä¸Šã€Œé˜²å½ˆè¡£ã€ï¼Ÿ',
            actions: [
              { label: 'ç©¿å­”ç´ é å‚™ï¼ç›´æ¥çµ¦å®ƒã€Œç ´é˜²ã€ï¼', correct: true, education: 'è¡€å°æ¿ç›¾ç‰Œï¼Ÿåœ¨NKç´°èƒé¢å‰åªæ˜¯è£é£¾å“ï¼ä¸€ç™¼ç©¿å­”ç´ ï¼Œç›´æ¥æ‰“ç©¿ï¼', detailedEducation: 'ç‹¡çŒ¾çš„CTCç´°èƒåœ¨è¡€æ¶²ä¸­æ¼‚æµæ™‚ï¼Œæœ‰æ™‚æœƒè€å°è°æ˜ï¼Œèª˜å°è¡€æ¶²ä¸­çš„è¡€å°æ¿èšé›†åœ¨è‡ªå·±å‘¨åœï¼Œå½¢æˆä¸€å€‹ã€Œè¡€å°æ¿ç›”ç”²ã€ã€‚é€™å€‹ç›”ç”²å¯ä»¥å¹«åŠ©å®ƒå€‘èº²é¿å…ç–«ç´°èƒï¼ˆå°¤å…¶æ˜¯NKç´°èƒï¼‰çš„ç›´æ¥æ”»æ“Šï¼Œé‚„èƒ½å¹«åŠ©å®ƒå€‘æ›´å®¹æ˜“é»é™„åœ¨è¡€ç®¡å£ä¸Šï¼Œç‚ºè½‰ç§»é‹ªè·¯ã€‚ä¸éï¼ŒNKç´°èƒä¹Ÿä¸æ˜¯çœæ²¹çš„ç‡ˆï¼Œå®ƒå€‘æ“æœ‰ç©¿å­”ç´ å’Œé¡†ç²’é…¶é€™é¡ã€Œç§˜å¯†æ­¦å™¨ã€ï¼Œå¯ä»¥ç›´æ¥åœ¨ç›®æ¨™ç´°èƒè†œä¸Šæ‰“æ´ï¼Œç„¶å¾Œæ³¨å…¥ã€Œæ¯’è—¥ã€ï¼Œå°±ç®—æœ‰ç›”ç”²ä¿è­·ï¼Œä¹Ÿé›£é€ƒä¸€æ­»ï¼'},
              { label: 'å•Ÿå‹•ã€ŒNETsã€ï¼ˆä¸­æ€§çƒèƒå¤–é™·é˜±ï¼‰å›°ä½å®ƒå€‘ã€‚', correct: false, education: 'NETsæ˜¯ä¸­æ€§çƒçš„çµ•æ‹›ï¼ŒNKç´°èƒæœ‰è‡ªå·±çš„çœ‹å®¶æœ¬é ˜ï¼Œä¸ç”¨æ¶åˆ¥äººçš„æ­¦å™¨å•¦ï¼'}
            ]
          },
          { 
            id: 4,
            scenario: 'è‚ºéƒ¨å¾®è¡€ç®¡å¤§å¡è»Šï¼Œä¸€å †CTCå¡åœ¨è£¡é¢å‹•å½ˆä¸å¾—ï¼Œé€™æ˜¯...ï¼Ÿ',
            actions: [
              { label: 'å¤©è³œè‰¯æ©Ÿï¼ç™¼å‹•ã€Œç“®ä¸­æ‰é±‰ã€å¤§æƒè•©ï¼', correct: true, education: 'å°±æ˜¯ç¾åœ¨ï¼è¶å®ƒç—…è¦å®ƒå‘½ï¼ä¸€ç¶²æ‰“ç›¡ï¼Œæˆ°åŠŸå½ªç‚³ï¼', detailedEducation: 'è‚ºéƒ¨æ˜¯ç™Œç—‡å¸¸è¦‹çš„è½‰ç§»å™¨å®˜ä¹‹ä¸€ï¼Œå› ç‚ºå…¨èº«çš„è¡€æ¶²éƒ½æœƒæµç¶“è‚ºéƒ¨é€²è¡Œæ°£é«”äº¤æ›ï¼Œè‚ºéƒ¨çš„å¾®è¡€ç®¡ç¶²è·¯éå¸¸å¯†é›†ä¸”ç‹¹çª„ã€‚ç•¶CTCç´°èƒéš¨è‘—è¡€æ¶²å¾ªç’°åˆ°é”è‚ºéƒ¨æ™‚ï¼Œå¾ˆå®¹æ˜“å› ç‚ºé«”ç©ç›¸å°è¼ƒå¤§æˆ–ç´°èƒæœ¬èº«æ¯”è¼ƒã€Œåƒµç¡¬ã€è€Œåœ¨é€™äº›ç´°å°çš„è¡€ç®¡ä¸­ã€Œå¡é—œã€ã€‚é€™ç¨®ã€Œäº¤é€šå µå¡ã€çš„ç‹€æ…‹ï¼Œåè€Œçµ¦äº†å…ç–«ç´°èƒä¸€å€‹çµ•ä½³çš„æ”»æ“Šæ©Ÿæœƒï¼Œå¯ä»¥åœ¨å®ƒå€‘å‹•å½ˆä¸å¾—æ™‚é€²è¡Œåœå‰¿ï¼Œé˜»æ­¢å®ƒå€‘é€²ä¸€æ­¥æ»²é€åˆ°è‚ºçµ„ç¹”ä¸­ã€‚'},
              { label: 'é‡‹æ”¾ã€Œè¡€ç®¡èˆ’å¼µå› å­ã€ï¼Œå¹«åŠ©å®ƒå€‘ç–é€šã€‚', correct: false, education: 'é•·å®˜ï¼æˆ‘å€‘æ˜¯ä¾†æŠ“å£è›‹çš„ï¼Œä¸æ˜¯ä¾†ç•¶äº¤é€šè­¦å¯Ÿç–å°äº¤é€šçš„å•Šï¼'}
            ]
          },
          { 
            id: 5,
            scenario: 'ç™¼ç¾CTCå·å·æ‘¸æ‘¸å»ºç«‹é ç«¯è½‰ç§»æ“šé»ï¼Œæº–å‚™æäº‹ï¼',
            actions: [
              { label: 'ç·Šæ€¥å‘¼å«CTLå’Œè¼”åŠ©Tç´°èƒå…„å¼Ÿï¼Œçµ„åœ˜åœå‰¿ï¼', correct: true, education: 'åœ˜éšŠåŠ›é‡å¤§ï¼å…ç–«è¯è»å‡ºæ“Šï¼Œå°‡é‚ªæƒ¡çš„è½‰ç§»æ“šé»é€£æ ¹æ‹”èµ·ï¼å‹åˆ©ï¼', detailedEducation: 'å°æŠ—è…«ç˜¤ä¸æ˜¯å–®ä¸€å…ç–«ç´°èƒçš„ä»»å‹™ï¼Œè€Œæ˜¯éœ€è¦ã€Œå…ç–«è¯è»ã€çš„å”åŒä½œæˆ°ï¼ç•¶ç™¼ç¾è…«ç˜¤ç´°èƒçš„è¹¤è·¡æ™‚ï¼ŒNKç´°èƒå¯ä»¥å…ˆç™¼åˆ¶äººï¼Œè€Œæ›´ç²¾å¯†çš„ã€Œé©æ‡‰æ€§å…ç–«ã€éƒ¨éšŠä¹Ÿæœƒè¢«å•Ÿå‹•ã€‚å…¶ä¸­ï¼Œè¼”åŠ©Tç´°èƒï¼ˆCD4+ Tç´°èƒï¼‰å°±åƒæ˜¯ã€ŒæŒ‡æ®å®˜ã€ï¼Œå®ƒå€‘èƒ½æ´»åŒ–ä¸¦ã€ŒæŒ‡å°ã€ç´°èƒæ¯’æ€§Tæ·‹å·´ç´°èƒï¼ˆCTLæˆ–CD8+ Tç´°èƒï¼Œä¹Ÿå°±æ˜¯ã€Œæ®ºæ‰‹Tç´°èƒã€ï¼‰ã€‚CTLæ˜¯ç²¾æº–æ‰“æ“Šéƒ¨éšŠï¼Œèƒ½ç‰¹ç•°æ€§åœ°è­˜åˆ¥ä¸¦æ¶ˆæ»…é‚£äº›å¸¶æœ‰è…«ç˜¤ã€Œè¨˜è™Ÿã€ï¼ˆæŠ—åŸï¼‰çš„ç™Œç´°èƒã€‚é€™ç¨®å¤šç´°èƒåˆä½œæ‰èƒ½æœ‰æ•ˆåœ°æ§åˆ¶å’Œæ¸…é™¤è…«ç˜¤ã€‚'},
              { label: 'å•Ÿå‹•ã€Œç´°èƒè‡ªå™¬ã€æ©Ÿåˆ¶ï¼Œå¸Œæœ›å®ƒå€‘è‡ªæˆ‘æ¯€æ»…ã€‚', correct: false, education: 'ç´°èƒè‡ªå™¬æ˜¯ç´°èƒå…§éƒ¨çš„æ¸…ç†æ©Ÿåˆ¶ï¼Œæˆ‘å€‘å…ç–«ç´°èƒé‚„æ˜¯å¾—è¦ªè‡ªå‹•æ‰‹è§£æ±ºå¤–éƒ¨å¨è„…æ¯”è¼ƒå¿«ï¼'}
            ]
          },
          { 
            id: 6,
            scenario: 'CTCé‡‹æ”¾å¤§é‡TGF-betaç­‰ã€Œå…ç–«æŠ‘åˆ¶åŠ‘ã€ï¼Œè©¦åœ–ç™±ç˜“ä½ çš„æˆ°å‹ï¼',
            actions: [
              { label: 'é‡‹æ”¾IFN-Î³ï¼ˆå¹²æ“¾ç´ ä¼½ç‘ªï¼‰ï¼Œå¹éŸ¿ã€Œåæ”»è™Ÿè§’ã€ï¼Œæ´»åŒ–å‹è»ï¼', correct: true, education: 'æ¼‚äº®ååˆ¶ï¼IFN-Î³èƒ½å–šé†’è¢«æŠ‘åˆ¶çš„å…ç–«ç´°èƒï¼Œé€†è½‰æˆ°å±€ï¼', detailedEducation: 'å¹²æ“¾ç´ ä¼½ç‘ª (IFN-Î³) æ˜¯å…ç–«ç³»çµ±ä¸­ä¸€å€‹éå¸¸é‡è¦çš„ã€Œæˆ°é¬¥è™Ÿè§’ã€ï¼ç•¶å…ç–«ç´°èƒï¼ˆå¦‚NKç´°èƒã€Tç´°èƒï¼‰é‡åˆ°æ•µäººæˆ–æ¥æ”¶åˆ°å±éšªä¿¡è™Ÿæ™‚ï¼Œå°±æœƒåˆ†æ³ŒIFN-Î³ã€‚å®ƒæœ‰å¤šç¨®å¼·å¤§çš„åŠŸèƒ½ï¼šå¯ä»¥ç›´æ¥æŠ‘åˆ¶æŸäº›è…«ç˜¤ç´°èƒçš„ç”Ÿé•·ï¼›èƒ½ã€Œå–šé†’ã€ä¸¦å¢å¼·å…¶ä»–å…ç–«ç´°èƒï¼ˆå¦‚å·¨å™¬ç´°èƒã€Tç´°èƒï¼‰çš„æ®ºæ•µèƒ½åŠ›ï¼›é‚„èƒ½è®“ç™Œç´°èƒæ›´å®¹æ˜“è¢«å…ç–«ç³»çµ±è­˜åˆ¥ï¼ˆä¾‹å¦‚ï¼Œä¿ƒä½¿ç™Œç´°èƒè¡¨é”æ›´å¤šçš„MHCåˆ†å­ï¼‰ã€‚é¢å°è…«ç˜¤é‡‹æ”¾çš„TGF-Î²é€™é¡ã€Œè¿·é­‚ç…™éœ§ã€ï¼ŒIFN-Î³å°±åƒä¸€åŠ‘å¼·å¿ƒé‡ï¼Œèƒ½æœ‰æ•ˆååˆ¶æŠ‘åˆ¶ï¼Œé‡æŒ¯å…ç–«å¤§è»çš„å£«æ°£ï¼'},
              { label: 'åˆ†æ³Œã€Œç™½è¡€çƒä»‹ç´ -10ã€(IL-10)ï¼Œè©¦åœ–ä¸­å’ŒæŠ‘åˆ¶åŠ‘ã€‚', correct: false, education: 'ç³Ÿç³•ï¼IL-10 åè€Œæ˜¯å€‹å…ç–«ã€ŒæŠ‘åˆ¶æ€§ã€çš„ç´°èƒæ¿€ç´ ï¼Œæœƒè®“æˆ°æ³é›ªä¸ŠåŠ éœœå•Šï¼'}
            ]
          },
          { 
            id: 7,
            scenario: 'æ¨¹çªç´°èƒï¼ˆDCï¼‰æ•ç²äº†CTCçš„ã€ŒçŠ¯ç½ªè­‰æ“šã€ï¼ˆæŠ—åŸï¼‰ï¼Œæ­£é€å¾€æ·‹å·´çµç¸½éƒ¨ï¼',
            actions: [
              { label: 'æä¾›è­·èˆªï¼Œç¢ºä¿æƒ…å ±å®‰å…¨é€é”ï¼Œä¸¦æº–å‚™è¿æ¥Tç´°èƒæ´è»ï¼', correct: true, education: 'å®Œç¾é…åˆï¼æƒ…å ±æ˜¯å‹åˆ©çš„é—œéµï¼ŒTç´°èƒå¤§è»å³å°‡æŠµé”æˆ°å ´ï¼', detailedEducation: 'æ¨¹çªç´°èƒ (DC) æ˜¯å…ç–«ç³»çµ±ä¸­æœ€å°ˆæ¥­çš„ã€Œæƒ…å ±å“¡ã€å’Œã€Œæ•™å®˜ã€ã€‚å®ƒå€‘çš„ä»»å‹™æ˜¯åœ¨èº«é«”å„è™•å·¡é‚ï¼Œä¸€æ—¦ç™¼ç¾å¯ç–‘çš„ã€Œå…¥ä¾µè€…ã€ï¼ˆå¦‚ç™Œç´°èƒé‡‹æ”¾çš„ç‰¹æ®Šè›‹ç™½è³ªï¼Œå³è…«ç˜¤æŠ—åŸï¼‰ï¼Œå°±æœƒç«‹åˆ»å°‡å…¶åå™¬ä¸¦åˆ†è§£ã€‚ç„¶å¾Œï¼ŒDCæœƒå¸¶è‘—é€™äº›ã€ŒçŠ¯ç½ªè­‰æ“šã€é·ç§»åˆ°æœ€è¿‘çš„ã€Œè»äº‹ç¸½éƒ¨ã€â€”â€”æ·‹å·´çµã€‚åœ¨æ·‹å·´çµè£¡ï¼ŒDCæœƒå°‡é€™äº›æŠ—åŸã€Œå±•ç¤ºã€çµ¦Tç´°èƒçœ‹ï¼Œç­‰æ–¼æ˜¯åœ¨è¨“ç·´å’Œå•Ÿå‹•Tç´°èƒï¼Œå‘Šè¨´å®ƒå€‘ã€Œæ•µäººé•·é€™æ¨£ï¼Œå¿«å»æ¶ˆæ»…å®ƒå€‘ï¼ã€ã€‚é€™å€‹éç¨‹æ˜¯å•Ÿå‹•é‡å°ç‰¹å®šè…«ç˜¤çš„ç²¾æº–å…ç–«æ‰“æ“Šçš„é—œéµç¬¬ä¸€æ­¥ã€‚'},
              { label: 'é‡‹æ”¾ã€Œé¡†ç²’é…¶Bã€ï¼Œè©¦åœ–é ç¨‹æ¸…é™¤DCè·¯ä¸Šçš„éšœç¤™ã€‚', correct: false, education: 'é¡†ç²’é…¶Bæ˜¯NKç´°èƒå’ŒCTLè¿‘è·é›¢æ”»æ“Šçš„æ­¦å™¨ï¼Œç”¨ä¾†é ç¨‹æ¸…è·¯æœ‰é»å¤§æå°ç”¨äº†ï¼Œè€Œä¸”å¯èƒ½æœƒèª¤å‚·å‹è»å•Šï¼'}
            ]
          },
          { 
            id: 8,
            scenario: 'Tç´°èƒæ´è»å·²åˆ°ï¼ä½†æœ‰äº›CTCè¡¨ç¾å‡ºPD-L1ï¼Œè®“Tç´°èƒã€Œä¸‹ä¸äº†æ‰‹ã€ï¼',
            actions: [
              { label: 'ä½¿ç”¨ã€ŒæŠ—PD-1/PD-L1æŠ—é«”ã€è§£é™¤Tç´°èƒå°å°ï¼Œè®“å®ƒå€‘æ¢å¾©æˆ°åŠ›ï¼', correct: true, education: 'ç¥ä¾†ä¸€ç­†ï¼å…ç–«æª¢æŸ¥é»æŠ‘åˆ¶åŠ‘èƒ½å–šé†’è¢«å£“åˆ¶çš„Tç´°èƒï¼Œè®“å®ƒå€‘é‡æ–°è­˜åˆ¥ä¸¦æ”»æ“Šç™Œç´°èƒï¼', detailedEducation: 'PD-1æ˜¯Tç´°èƒè¡¨é¢çš„ä¸€å€‹ã€Œç…è»Šã€å—é«”ï¼Œè€ŒPD-L1æ˜¯æŸäº›è…«ç˜¤ç´°èƒæœƒè¡¨ç¾çš„ã€Œç…è»Šçš®ã€ã€‚ç•¶PD-L1èˆ‡PD-1çµåˆï¼ŒTç´°èƒçš„æ”»æ“ŠåŠ›å°±æœƒè¢«æŠ‘åˆ¶ï¼Œç™Œç´°èƒå¾—ä»¥é€ƒè„«ã€‚æŠ—PD-1æˆ–æŠ—PD-L1æŠ—é«”é€™é¡å…ç–«æª¢æŸ¥é»æŠ‘åˆ¶åŠ‘ï¼Œå°±åƒæ˜¯é¬†é–‹äº†Tç´°èƒçš„ã€Œæ‰‹ç…è»Šã€ï¼Œé˜»æ­¢PD-1å’ŒPD-L1çš„çµåˆï¼Œè®“Tç´°èƒæ¢å¾©æ´»åŠ›ï¼Œèƒ½å¤ é‡æ–°è­˜åˆ¥ä¸¦æ”»æ“Šè…«ç˜¤ç´°èƒã€‚é€™æ˜¯è¿‘å¹´ä¾†ç™Œç—‡å…ç–«æ²»ç™‚é ˜åŸŸçš„é‡å¤§çªç ´ï¼Œç‚ºè¨±å¤šæ‚£è€…å¸¶ä¾†äº†æ–°çš„å¸Œæœ›ã€‚'},
              { label: 'å•Ÿå‹•ã€ŒFas/FasLã€å‡‹äº¡è·¯å¾‘ï¼ŒæœŸæœ›CTCè‡ªæˆ‘äº†æ–·ã€‚', correct: false, education: 'é›–ç„¶Fas/FasLæ˜¯èª˜å°ç´°èƒå‡‹äº¡çš„é‡è¦é€”å¾‘ï¼Œä½†é¢å°PD-L1çš„æŠ‘åˆ¶ï¼ŒTç´°èƒå¯èƒ½æ ¹æœ¬æ²’æ©Ÿæœƒå•Ÿå‹•é€™å€‹è·¯å¾‘ã€‚è¦å…ˆè§£é™¤æŠ‘åˆ¶æ‰è¡Œï¼'}
            ]
          },
          { 
            id: 9,
            scenario: 'ä¸€å ´å¤§æˆ°å¾Œï¼Œéƒ¨åˆ†ç‹¡çŒ¾çš„CTCä¼¼ä¹èº²èµ·ä¾†é€²å…¥ã€Œä¼‘çœ ã€ç‹€æ…‹ã€‚',
            actions: [
              { label: 'èˆ‡è¨˜æ†¶Tç´°èƒå’Œè¨˜æ†¶Bç´°èƒåˆä½œï¼Œå»ºç«‹é•·æœŸç›£æ§ç¶²çµ¡ï¼Œé˜²æ­¢å¾©ç™¼ï¼', correct: true, education: 'æ·±è¬€é æ…®ï¼è¨˜æ†¶ç´°èƒèƒ½è¨˜ä½æ•µäººçš„æ¨£è²Œï¼Œä¸€æ—¦CTCç”¦é†’ï¼Œå°±èƒ½è¿…é€Ÿåæ‡‰ï¼Œå°‡å…¶æ¶ˆæ»…ï¼', detailedEducation: 'å…ç–«ç³»çµ±å…·æœ‰ã€Œè¨˜æ†¶ã€åŠŸèƒ½ã€‚ç•¶èº«é«”åˆæ¬¡é­é‡ç‰¹å®šçš„ç—…åŸé«”æˆ–è…«ç˜¤æŠ—åŸå¾Œï¼Œä¸€éƒ¨åˆ†åƒèˆ‡æˆ°é¬¥çš„Tç´°èƒå’ŒBç´°èƒæœƒè½‰åŒ–ç‚ºã€Œè¨˜æ†¶ç´°èƒã€ã€‚é€™äº›è¨˜æ†¶ç´°èƒå°±åƒæ˜¯ç¶“é©—è±å¯Œçš„ã€Œè€å…µã€ï¼Œå®ƒå€‘å£½å‘½å¾ˆé•·ï¼Œä¸¦ä¸”è¨˜ä½äº†æ•µäººçš„ã€Œé•·ç›¸ã€ã€‚å¦‚æœå°‡ä¾†åŒæ¨£çš„æ•µäººå†æ¬¡å…¥ä¾µï¼Œé€™äº›è¨˜æ†¶ç´°èƒèƒ½å¤ è¢«è¿…é€Ÿå–šé†’ï¼Œä¸¦ç™¼å‹•æ›´å¿«é€Ÿã€æ›´å¼·å¤§çš„å…ç–«åæ‡‰ï¼ŒåŠæ™‚æ¸…é™¤å¨è„…ï¼Œé˜²æ­¢ç–¾ç—…å¾©ç™¼æˆ–è…«ç˜¤æ²åœŸé‡ä¾†ã€‚é€™æ˜¯ç–«è‹—èƒ½æä¾›é•·æœŸä¿è­·åŠ›çš„é‡è¦åŸç†ï¼Œä¹Ÿæ˜¯å…ç–«ç³»çµ±ç¶­æŒé•·æœŸå¥åº·çš„é‡è¦æ©Ÿåˆ¶ã€‚'},
              { label: 'åˆ†æ³Œã€Œæº¶èŒé…¶ã€ï¼Œè©¦åœ–åˆ†è§£ä¼‘çœ ç´°èƒçš„ç´°èƒå£ã€‚', correct: false, education: 'æº¶èŒé…¶ä¸»è¦æ˜¯å°ä»˜ç´°èŒçš„ï¼Œå°ä»˜èº²èµ·ä¾†çš„CTCç´°èƒææ€•æ²’ä»€éº¼æ•ˆæœï¼Œè€Œä¸”å‹•ç‰©ç´°èƒæ²’æœ‰ç´°èƒå£å–”ï¼'}
            ]
          },
          { 
            id: 10,
            scenario: 'ç¶“éä¸æ‡ˆåŠªåŠ›ï¼ŒæˆåŠŸæ¸…é™¤å¤§éƒ¨åˆ†å¯è¦‹çš„CTCï¼Œä½¿è…«ç˜¤é€²å…¥ã€Œç·©è§£ã€ç‹€æ…‹ï¼',
            actions: [
              { label: 'ç¶­æŒé«˜åº¦è­¦è¦ºçš„ã€Œå…ç–«ç›£è¦–ã€ï¼ŒæŒçºŒå·¡é‚ï¼Œæ¸…é™¤ä»»ä½•æ®˜å­˜æˆ–æ–°ç”Ÿçš„å¨è„…ï¼', correct: true, education: 'ä»»å‹™å°šæœªå®Œå…¨çµæŸï¼æŒçºŒçš„å…ç–«ç›£è¦–æ˜¯é˜²æ­¢ç™Œç—‡å¾©ç™¼çš„é—œéµï¼Œå®ˆè­·èº«é«”çš„å’Œå¹³ï¼', detailedEducation: 'å…ç–«ç›£è¦–æ˜¯å…ç–«ç³»çµ±çš„ä¸€é …æ—¥å¸¸é‡è¦å·¥ä½œï¼Œå°±åƒä¸€æ”¯æ°¸ä¸é¬†æ‡ˆçš„å·¡é‚éšŠï¼Œæ™‚åˆ»åœ¨é«”å…§åµæŸ¥æ˜¯å¦æœ‰ç•°å¸¸ç´°èƒï¼ˆå¦‚æ—©æœŸç™Œç´°èƒæˆ–è¢«ç—…æ¯’æ„ŸæŸ“çš„ç´°èƒï¼‰å‡ºç¾ã€‚ä¸€æ—¦ç™¼ç¾é€™äº›ã€Œæ½›åœ¨å¨è„…ã€ï¼Œå…ç–«ç´°èƒå°±æœƒç«‹å³æ¡å–è¡Œå‹•å°‡å…¶æ¸…é™¤ï¼Œé˜²æ‚£æ–¼æœªç„¶ã€‚å³ä½¿åœ¨ç™Œç—‡æ²»ç™‚æˆåŠŸï¼Œè…«ç˜¤é€²å…¥ã€Œç·©è§£æœŸã€å¾Œï¼Œå…ç–«ç›£è¦–ç³»çµ±ä»ç„¶æ‰®æ¼”è‘—é—œéµè§’è‰²ï¼Œå¹«åŠ©æ¸…é™¤ä»»ä½•å¯èƒ½æ®˜å­˜çš„ç™Œç´°èƒï¼Œé™ä½å¾©ç™¼çš„é¢¨éšªï¼ŒåŠªåŠ›ç¶­æŒèº«é«”çš„é•·æœŸå¥åº·èˆ‡å’Œå¹³ã€‚'},
              { label: 'å•Ÿå‹•ã€Œç´°èƒè¡°è€ã€ç¨‹åºï¼Œè®“æ‰€æœ‰å…ç–«ç´°èƒä¸€èµ·é€€ä¼‘ã€‚', correct: false, education: 'æ¯æ¹¯å•Šï¼å…ç–«ç³»çµ±å¯ä¸èƒ½éš¨ä¾¿é€€ä¼‘ï¼Œèº«é«”çš„å’Œå¹³é‚„éœ€è¦å¤§å®¶ä¸€èµ·å®ˆè­·å‘¢ï¼ç´°èƒè¡°è€æ˜¯æ­£å¸¸çš„ç”Ÿå‘½éç¨‹ï¼Œä½†ä¸èƒ½ä¸»å‹•è®“æ•´å€‹ç³»çµ±åœæ“ºã€‚'}
            ]
          }
        ]
      },
      narratorComments: { 
        default: "æˆ‘æ˜¯ç´°èƒå°ç·¨ï¼Œä½ çš„è²¼èº«æˆ°åœ°è¨˜è€…ï¼æœ‰ä»€éº¼ç–‘é›£é›œç—‡ï¼Œéš¨æ™‚é»æˆ‘ï¼",
        correct: ["å“¼å“¼ï¼Œé€™æ‹›æ˜¯ä¸æ˜¯æˆ‘å·å·æ•™ä½ çš„å•Šï¼Ÿç®—ä½ è­˜è²¨ï¼", "æ¼‚äº®ï¼ç°¡ç›´æ˜¯æ•™ç§‘æ›¸ç´šåˆ¥çš„æ“ä½œï¼", "ç­”å°å•¦ï¼ä½ çœŸæ˜¯å€‹å°æ©Ÿéˆé¬¼ï¼"],
        incorrect: ["å’¦ï¼Ÿä½ æ˜¯è·‘éŒ¯æ£šäº†å—ï¼ŸåŠ‡æœ¬æ‹¿åäº†å–”ï¼", "å“å‘€ï¼Œé€™å€‹é¸é …æœ‰é»ã€Œé›·ã€...ä¸‹æ¬¡åŠ æ²¹ï¼", "åˆ¥ç°å¿ƒï¼Œå‹æ•—ä¹ƒå…µå®¶å¸¸äº‹ï¼Œå°ç·¨æˆ‘æŒºä½ ï¼"],
        levelStart: [
            "æ–°çš„ä¸€é—œï¼Œæ–°çš„å†’éšªï¼æº–å‚™å¥½äº†å—ï¼Ÿ",
            "ç´°èƒçš„æˆ°å ´é¢¨é›²è®Šå¹»ï¼Œé€™æ¬¡æœƒé‡åˆ°ä»€éº¼å‘¢ï¼Ÿ",
            "æ‰“èµ·ç²¾ç¥ä¾†ï¼ä¸‹ä¸€é—œçš„æŒ‘æˆ°æ›´åˆºæ¿€ï¼"
        ],
        achievement: "å®å’šï¼æˆå°±è§£é–ï¼ä½ å¤ªç‰›é€¼å•¦ï¼" 
      },
      achievements: [ 
        { id: 'newbie_ctc', name: 'æ–°æ‰‹CTC', icon: 'ğŸ•¶ï¸', condition: (role, level) => role === 'ctc' && level === 3 }, 
        { id: 'newbie_immune', name: 'æ–°æ‰‹å…ç–«å…µ', icon: 'ğŸ›¡ï¸', condition: (role, level) => role === 'immune' && level === 3 },
        { id: 'master_ctc', name: 'CTCå¤§å¸«', icon: 'ğŸ‘‘', condition: (role, level, isEnd) => role === 'ctc' && isEnd },
        { id: 'master_immune', name: 'å…ç–«ç¸½å¸ä»¤', icon: 'ğŸ†', condition: (role, level, isEnd) => role === 'immune' && isEnd },
      ],
      progressNodes: ["åŸä½", "è¡€æµ", "è‚ºéƒ¨", "é ç«¯å™¨å®˜", "å¾®ç’°å¢ƒ"] 
    };

    // --- Helper: Get Random Narrator Comment ---
    const getRandomComment = (type) => {
        const comments = gameData.narratorComments[type];
        if (Array.isArray(comments)) {
            return comments[Math.floor(Math.random() * comments.length)];
        }
        return comments || gameData.narratorComments.default;
    };

    // --- Fisher-Yates Shuffle Algorithm ---
    const shuffleArray = (array) => {
        let currentIndex = array.length,  randomIndex;
        while (currentIndex !== 0) {
            randomIndex = Math.floor(Math.random() * currentIndex);
            currentIndex--;
            [array[currentIndex], array[randomIndex]] = [
            array[randomIndex], array[currentIndex]];
        }
        return array;
    };


    // --- Components ---
    const ProgressBar = ({ currentLevelIndex, totalLevels }) => {
        const numThematicStages = gameData.progressNodes.length; 
        const levelsPerStage = totalLevels / numThematicStages; 
        const currentThematicStageIndex = Math.floor(currentLevelIndex / levelsPerStage);

        return (
            <div className="progress-map">
                {gameData.progressNodes.map((nodeName, index) => ( 
                    <div
                        key={index}
                        className={`progress-node ${index === currentThematicStageIndex ? 'active' : ''} ${index < currentThematicStageIndex ? 'completed' : ''}`}
                    >
                        <div className="node-circle"></div>
                        {nodeName}
                    </div>
                ))}
            </div>
        );
    };

    const AchievementToast = ({ achievement }) => {
        useEffect(() => {
            if (achievement) {
                playSound('achievement').catch(e => console.error("Error from playSound in AchievementToast:", e));
            }
        }, [achievement]); 

        if (!achievement) return null;
        
        const AchievementIcon = () => (
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" style={{ marginRight: '8px' }}>
                <path d="M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-13h2v6h-2zm0 8h2v2h-2z"></path>
            </svg>
        );
        return (
            <div className="achievement-toast">
                <AchievementIcon />
                æˆå°±è§£é–ï¼š{achievement.name} {achievement.icon}
            </div>
        );
    };
    
    const Confetti = () => {
        const numConfetti = 50;
        const confettiElements = [];
        const colors = ['#f44336', '#e91e63', '#9c27b0', '#673ab7', '#3f51b5', '#2196f3', '#03a9f4', '#00bcd4', '#009688', '#4caf50', '#8bc34a', '#cddc39', '#ffeb3b', '#ffc107', '#ff9800'];

        for (let i = 0; i < numConfetti; i++) {
            const style = {
                left: `${Math.random() * 100}vw`,
                backgroundColor: colors[Math.floor(Math.random() * colors.length)],
                animationDelay: `${Math.random() * 2}s`,
                transform: `rotate(${Math.random() * 360}deg) scale(${Math.random() * 0.5 + 0.5})`,
                width: `${Math.random() * 5 + 8}px`, 
                height: `${Math.random() * 5 + 8}px`,
            };
            confettiElements.push(<div key={i} className="confetti" style={style}></div>);
        }
        return <div className="confetti-container">{confettiElements}</div>;
    };


    function CTCImmuneGame() {
      const [role, setRole] = useState(null);
      const [levelIndex, setLevelIndex] = useState(0);
      const [showEdu, setShowEdu] = useState(false);
      const [eduText, setEduText] = useState('');
      const [correctCount, setCorrectCount] = useState(0);
      const [incorrectCount, setIncorrectCount] = useState(0);
      const [lastWasCorrect, setLastWasCorrect] = useState(null);
      const [keyForScenario, setKeyForScenario] = useState(0); 

      const [showNarratorPopup, setShowNarratorPopup] = useState(true); // Default to true
      const [narratorText, setNarratorText] = useState(gameData.narratorComments.default);

      const [unlockedAchievements, setUnlockedAchievements] = useState([]);
      const [currentToast, setCurrentToast] = useState(null);
      
      const [shuffledActions, setShuffledActions] = useState([]);
      const [showDetailedEdu, setShowDetailedEdu] = useState(false);
      const [currentDetailedEduText, setCurrentDetailedEduText] = useState("");
      
      useEffect(() => {
        if (currentToast) {
            const timer = setTimeout(() => setCurrentToast(null), 4000); 
            return () => clearTimeout(timer);
        }
      }, [currentToast]);

      const currentLevels = role ? gameData.levels[role] : [];
      const totalLevels = role ? gameData.levels[role].length : 0; 
      const currentLevelData = role && levelIndex < totalLevels && currentLevels[levelIndex] ? currentLevels[levelIndex] : null;

      useEffect(() => {
        if (currentLevelData) {
            setShuffledActions(shuffleArray([...currentLevelData.actions]));
            setShowDetailedEdu(false); 
            setCurrentDetailedEduText("");
        }
      }, [currentLevelData]);


      const handleRoleSelect = (selectedRole) => {
        ensureAudioInitialized().catch(e => console.error("Error ensuring audio on role select:", e));
        setRole(selectedRole);
        const roleName = selectedRole === 'ctc' ? 'CTCç´°èƒï¼ˆæ½›è¡Œå¤§å¸«ï¼‰' : 'å…ç–«ç´°èƒï¼ˆæ­£ç¾©éµæ‹³ï¼‰';
        setNarratorText(`ä½ é¸æ“‡äº† ${roleName}ï¼ä¸€å ´å‰å¤§çš„ç´°èƒå†’éšªå³å°‡å±•é–‹ï¼`);
        setLevelIndex(0); 
        setCorrectCount(0);
        setIncorrectCount(0);
        setUnlockedAchievements([]);
        setShowNarratorPopup(true); // Ensure narrator is open when a new role is selected
      };

      const handleAction = (action) => {
        if (!action) return;
        ensureAudioInitialized().catch(e => console.error("Error ensuring audio on action:", e));

        setEduText(action.education);
        setShowEdu(true);
        setLastWasCorrect(action.correct);
        setShowDetailedEdu(false); 

        if (action.correct) {
          playSound('correct').catch(e => console.error("Error playing correct sound:", e));
          setCorrectCount((c) => c + 1);
          setNarratorText(getRandomComment('correct')); 
          setCurrentDetailedEduText(action.detailedEducation || ""); 

          // Achievement check moved inside correct answer block
          gameData.achievements.forEach(ach => {
              if (!unlockedAchievements.find(ua => ua.id === ach.id) && ach.condition(role, levelIndex + 1, false)) {
                  setUnlockedAchievements(prev => [...prev, ach]);
                  setCurrentToast(ach);
                  setNarratorText(gameData.narratorComments.achievement);
              }
          });

        } else {
          playSound('incorrect').catch(e => console.error("Error playing incorrect sound:", e));
          setIncorrectCount((c) => c + 1);
          setNarratorText(getRandomComment('incorrect')); 
          setCurrentDetailedEduText(""); 
        }
      };

      const handleShowDetailedEdu = () => {
        setShowDetailedEdu(true);
      };

      const handleNextStep = () => { 
        setShowEdu(false);
        setShowDetailedEdu(false); 
        setCurrentDetailedEduText("");

        if (lastWasCorrect) { 
          let nextLevelIndex = levelIndex + 1;
          if (nextLevelIndex < totalLevels) { 
              setLevelIndex(nextLevelIndex);
              setKeyForScenario(prevKey => prevKey + 1); 
              setNarratorText(getRandomComment('levelStart')); 
          } else { 
              gameData.achievements.forEach(ach => {
                  if (!unlockedAchievements.find(ua => ua.id === ach.id) && ach.condition(role, levelIndex, true)) {
                      setUnlockedAchievements(prev => [...prev, ach]);
                      setCurrentToast(ach); 
                  }
              });
              setNarratorText("æ­å–œï¼ä½ å®Œæˆäº†æ‰€æœ‰æŒ‘æˆ°ï¼çœ‹çœ‹ä½ çš„æˆç¸¾å–®å§ï¼");
              setLevelIndex(nextLevelIndex); 
          }
        } else { 
          setNarratorText(getRandomComment('incorrect') + " å†è©¦ä¸€æ¬¡å§ï¼");
        }
      };

      const restart = () => {
        setRole(null);
        setLevelIndex(0);
        setShowEdu(false);
        setEduText('');
        setCorrectCount(0);
        setIncorrectCount(0);
        setLastWasCorrect(null);
        setKeyForScenario(0);
        setNarratorText(gameData.narratorComments.default);
        setUnlockedAchievements([]);
        setCurrentToast(null);
        setShuffledActions([]);
        setShowDetailedEdu(false);
        setCurrentDetailedEduText("");
        setShowNarratorPopup(true); // Ensure narrator is open on restart
      };

      const toggleNarrator = () => {
          setShowNarratorPopup(!showNarratorPopup);
          if (!showNarratorPopup) { 
              if (currentLevelData) {
                // Narrator text is set by other game events
              } else if (!role) {
                setNarratorText(gameData.narratorComments.default);
              }
          }
      };
      
      // --- Render Logic ---
      if (!role) {
        return (
          <div>
            <h1 className="game-title">CTCç´°èƒ vs å…ç–«ç´°èƒï¼šçµ‚æ¥µå°æ±º</h1>
            <div className="card">
              <h2 style={{ fontWeight: 700, fontSize: 24, marginBottom: 20 }}>{gameData.intro.prompt}</h2>
              {gameData.intro.options.map((opt) => (
                <button key={opt.id} onClick={() => handleRoleSelect(opt.id)}>
                  {opt.label}
                </button>
              ))}
            </div>
          </div>
        );
      }
      
      if (currentLevelData) { 
        return (
          <div>
            <h1 className="game-title">ç´°èƒå¤§å†’éšª - ç¬¬ {levelIndex + 1} é—œ</h1>
            <ProgressBar currentLevelIndex={levelIndex} totalLevels={totalLevels} /> 
            <div className="level-card">
              <div className="scenario-text" key={keyForScenario} style={{marginTop: '20px'}}>{currentLevelData.scenario}</div>
              {shuffledActions.map((action, i) => ( 
                <button 
                    key={i} 
                    className="action-button" 
                    onClick={() => handleAction(action)}
                >
                  {action.label}
                </button>
              ))}
              {showEdu && (
                <div className="education-box">
                  <div>{eduText}</div>
                  {lastWasCorrect && !showDetailedEdu && currentDetailedEduText && (
                     <button className="detailed-edu-button" onClick={handleShowDetailedEdu}>
                        âœ¨ å°ç·¨æ·±å…¥è§£èªªï¼
                     </button>
                  )}
                  {lastWasCorrect && showDetailedEdu && currentDetailedEduText && (
                    <div className="detailed-education-box">
                        <p>{currentDetailedEduText}</p>
                    </div>
                  )}
                  <button className="next-button" onClick={handleNextStep} style={{marginTop: '20px'}}>
                    {lastWasCorrect ? "å¤ªæ£’äº†ï¼ä¸‹ä¸€é—œï¼" : "ç­”éŒ¯å›‰~å†è©¦ä¸€æ¬¡ï¼"}
                  </button>
                </div>
              )}
            </div>
            <div className="narrator-icon" onClick={toggleNarrator} title="ç´°èƒå°ç·¨">ğŸ’¬</div>
            {showNarratorPopup && (
                <div className="narrator-popup">
                     <p>{narratorText}</p>
                </div>
            )}
            {currentToast && <AchievementToast achievement={currentToast} />}
          </div>
        );
      }

      // Result Screen
      let resultMessage = "ç´°èƒäººç”Ÿå˜›ï¼Œæœ‰æ™‚ç£•ç£•ç¢°ç¢°ï¼Œä¸‹æ¬¡å†æˆ°ï¼";
      let showConfetti = false;
      if (incorrectCount < 3 && correctCount > 0) { 
          resultMessage = "ä½ å ªç¨±ç´°èƒç•Œçš„å·¨æ˜Ÿï¼å¤ªå²å®³äº†ï¼";
          showConfetti = true;
      } else if (incorrectCount >=3 && incorrectCount < (totalLevels / 2) ) { 
          resultMessage = "ä¸éŒ¯å˜›ï¼æ½›åŠ›ç„¡é™ï¼Œç¹¼çºŒåŠªåŠ›ï¼";
      }

      return (
        <div>
            <h1 className="game-title">å†’éšªçµæŸï¼</h1>
            <div className="result-card">
            <h2 style={{ fontWeight: 700, fontSize: 24, marginBottom: 12 }}>æ­å–œå®Œæˆæ‰€æœ‰é—œå¡ï¼</h2>
            <p style={{ fontSize: 18, marginBottom: 8 }}>
                æ­£ç¢ºé¡Œæ•¸ï¼š<span className="score-number">{correctCount}</span>
            </p>
            <p style={{ fontSize: 18, marginBottom: 16 }}>
                éŒ¯èª¤é¡Œæ•¸ï¼š<span className={`score-number ${incorrectCount > 0 ? 'incorrect-score' : ''}`}>{incorrectCount}</span>
            </p>
            <p style={{ fontSize: 18, fontWeight: 'bold', color: '#2980b9', marginTop: '20px' }}>{resultMessage}</p>
            
            {unlockedAchievements.length > 0 && (
                <div className="badges-collected">
                    <h3>å·²è§£é–æˆå°±å¾½ç« ï¼š</h3>
                    {unlockedAchievements.map(ach => (
                        <span key={ach.id} className="badge-icon" title={ach.name}>
                           {ach.icon} {ach.name}
                        </span>
                    ))}
                </div>
            )}
            
            <button onClick={restart} style={{marginTop: '25px'}}>é‡æ–°é–‹å§‹ä¸€å ´å‰å¤§å†’éšªï¼</button>
            </div>
            {showConfetti && <Confetti />}
            <div className="narrator-icon" onClick={toggleNarrator} title="ç´°èƒå°ç·¨">ğŸ’¬</div>
            {showNarratorPopup && (
                 <div className="narrator-popup">
                     <p>{narratorText}</p>
                </div>
            )}
            {currentToast && <AchievementToast achievement={currentToast} />}
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById('root')).render(<CTCImmuneGame />);
  </script>
</body>
</html>
